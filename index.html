<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <h1>Video Conferencing</h1>
        <div>
            <p>Your Peer ID: <span id="peerId"></span></p>
            <p>Your Friend Peer ID: <input type="text" name="" id="friendId"><button onclick="videoConnet()">Connect</button></p>
            <video id="myVideo" autoplay controls></video>
            <video id="friendVideo" autoplay controls></video>
        </div>
    </div>
    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script>
        let peerId = document.getElementById('peerId');
        var peerID = prompt("Enter your Peer ID:");
        let myVideo = document.getElementById('myVideo');
        let friendVideo = document.getElementById('friendVideo');
        let getUserMedia = navigator.getUserMedia;

        var peer = new Peer(peerID);
        peerId.innerText = peerID;

        function videoConnet(){
            let fid = document.getElementById('friendId').value;
            getUserMedia({video: true, audio: true}, function(stream){
                var call = peer.call(fid,stream);
                myVideo.srcObject = stream;
                call.on('stream', function(remoteStream) {
                    friendVideo.srcObject = remoteStream;
                });
            })
        };

        peer.on('call', function(call) {
            getUserMedia({video: true, audio: true}, function(stream){
                call.answer(stream);
                myVideo.srcObject = stream;
                call.on('stream', function(remoteStream) {
                    friendVideo.srcObject = remoteStream;
                });
            });
        });
    </script>
</body>
</html>